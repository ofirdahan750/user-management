<div class="verify">
  <div class="verify__container">
    <mat-card class="verify__card">
      @switch (status()) {
        @case (VerificationStatus.LOADING) {
          <div class="verify__content">
            <mat-spinner diameter="50"></mat-spinner>
            <h2 class="verify__title">{{ MESSAGES.VERIFICATION_LOADING }}</h2>
          </div>
        }
        @case (VerificationStatus.PENDING) {
          <div class="verify__content">
            <div class="verify__demo-notice">
              <mat-icon class="verify__demo-icon">{{ icons.INFO }}</mat-icon>
              <p class="verify__demo-text">
                <strong>{{ MESSAGES.DEMO_MODE_TITLE }}</strong> {{ MESSAGES.DEMO_MODE_DESCRIPTION_VERIFY }}
              </p>
            </div>
            @if (token()) {
              <div class="verify__token-actions">
                <app-submit-button
                  [label]="MESSAGES.VERIFY_NOW"
                  [isLoading]="isVerifying()"
                  [clickHandler]="verifyClickHandler"
                  type="button"
                  variant="raised"
                  color="primary"
                  class="verify__button"
                ></app-submit-button>
                <button
                  mat-raised-button
                  color="accent"
                  (click)="copyVerificationLink()"
                  class="verify__copy-button"
                  [attr.aria-label]="labels.COPY_LINK"
                >
                  <mat-icon>{{ icons.COPY }}</mat-icon>
                  {{ labels.COPY_LINK }}
                </button>
              </div>
            } @else {
              <p class="verify__message">{{ MESSAGES.REGISTRATION_SUCCESS }}</p>
              <app-submit-button
                [label]="labels.RESEND_VERIFICATION"
                [tooltip]="labels.RESEND_VERIFICATION"
                [clickHandler]="resendClickHandler"
                type="button"
                variant="raised"
                color="primary"
                class="verify__button"
              ></app-submit-button>
            }
            <app-back-link
              [route]="routes.LOGIN"
              [tooltip]="labels.TOOLTIP_NAVIGATE_LOGIN"
              class="verify__link"
            ></app-back-link>
          </div>
        }
        @case (VerificationStatus.SUCCESS) {
          <div class="verify__content">
            <mat-icon class="verify__icon verify__icon--success">{{ icons.CHECK_CIRCLE }}</mat-icon>
            <h2 class="verify__title">{{ MESSAGES.VERIFICATION_SUCCESS }}</h2>
            <p class="verify__message">
              {{ MESSAGES.VERIFICATION_REDIRECT }} {{ countdown() }} {{ MESSAGES.SECONDS }}
            </p>
            <app-link-button
              [route]="routes.LOGIN"
              [label]="labels.LOGIN"
              variant="raised"
              color="primary"
              [showIcon]="false"
              class="verify__button"
            ></app-link-button>
          </div>
        }
        @case (VerificationStatus.ERROR) {
          <div class="verify__content">
            <mat-icon class="verify__icon verify__icon--error">{{ icons.ERROR }}</mat-icon>
            <h2 class="verify__title">{{ MESSAGES.VERIFICATION_ERROR }}</h2>
            <p class="verify__message">
              {{ labels.RESEND_VERIFICATION }}
            </p>
            @if (email()) {
              <app-submit-button
                [label]="labels.RESEND_VERIFICATION"
                [tooltip]="labels.RESEND_VERIFICATION"
                [clickHandler]="resendClickHandler"
                type="button"
                variant="raised"
                color="primary"
                class="verify__button"
              ></app-submit-button>
            }
            <app-back-link
              [route]="routes.LOGIN"
              [tooltip]="labels.TOOLTIP_NAVIGATE_LOGIN"
              class="verify__link"
            ></app-back-link>
          </div>
        }
      }
    </mat-card>
  </div>
</div>
